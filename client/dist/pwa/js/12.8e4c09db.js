(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{"1d53":function(e,t,r){},"27ae":function(e,t,r){"use strict";var s=r("1d53"),n=r.n(s);n.a},e0b5:function(e,t,r){"use strict";var s=r("fd95"),n=r.n(s);n.a},f55e:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("q-card",{style:e.$q.platform.is.mobile?"":"width: 750px;"},[r("q-stepper",{ref:"stepper",attrs:{color:"primary",animated:"",vertical:e.$q.screen.lt.sm,horizontal:e.$q.screen.gt.sm,"keep-alive":!0},scopedSlots:e._u([{key:"navigation",fn:function(){return[r("div",{attrs:{clas:"q-pa-md"}},[4===e.step?r("purchaseProcessError",{attrs:{invalidNames:e.invalidNames,invalidIds:e.invalidIds,invalidCategories:e.invalidCategories}}):e._e(),r("div",{staticClass:"row justify-center q-pb-md"},[r("q-stepper-navigation",[r("div",{staticClass:"row justify-center q-pb-md q-pt-sm"},[e.step>1&&4!==e.step?r("q-btn",{staticClass:"q-mr-lg text-capitalize",attrs:{color:"logoRed",label:"Back"},on:{click:function(t){return e.$refs.stepper.previous()}}}):e._e(),1===e.step?r("q-btn",{staticClass:"q-mr-lg text-capitalize",attrs:{label:"Order more",color:"logoRed"},on:{click:e.closeDialog}}):e._e(),4===e.step?r("q-btn",{staticClass:"q-mr-lg text-capitalize",attrs:{label:"Close",color:"logoRed"},on:{click:e.closeDialog}}):e._e(),e.hasItemsInOrder&&4!==e.step?r("q-btn",{staticClass:"text-capitalize",attrs:{label:e.getLabel,color:"positive",disabled:!e.$store.getters.getAuth},on:{click:e.proceed}}):e._e()],1)])],1)],1)]},proxy:!0}]),model:{value:e.step,callback:function(t){e.step=t},expression:"step"}},[r("q-step",{attrs:{name:1,title:"Confirm Order",icon:"fas fa-receipt",done:e.step>1,"done-color":"positive","active-color":"logoRed"}},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-xs-12"},[1===e.step?r("basket",{ref:"basket",on:{closeViewPurchaseProcess:e.closeDialog}}):e._e()],1)])]),r("q-step",{attrs:{name:2,title:"Order Details",icon:"fas fa-receipt","done-color":"positive","active-color":"logoRed",done:e.step>2}},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-xs-12"},[2===e.step?r("orderDetails",{ref:"orderDetail",on:{proceedPaymentMethod:e.proceedPaymentMethod}}):e._e()],1)])]),r("q-step",{attrs:{name:3,title:"Payment Method",icon:"far fa-credit-card","done-color":"positive","active-color":"logoRed"}},[3===e.step?r("purchaseSummary",{ref:"purchaseSummary",attrs:{orderTotal:e.orderTotal,deliveryOrCollection:e.orderDetails.orderType,orderDeliveryCharge:e.orderDeliveryCharge,promoDiscounts:e.$refs.basket._data.simplifiedDiscountPromo,totalPromoDiscounts:e.$refs.basket._data.totalPromoDiscounts},on:{placeOrder:e.placeOrder}}):e._e()],1)],1)],1)},n=[],i=(r("96cf"),r("c973")),a=r.n(i),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"text-color"},[r("q-card-section",{staticClass:"text-color row items-center q-pb-none"},[r("div",{staticClass:"col-xs-11"},[r("div",{staticClass:"text-weight-bolder q-pb-xs text-center text-subtitle1"},[e._v("\n        Your Order\n      ")])])]),r("div",{staticClass:"text-color row items-center text-center q-pb-none"},[r("div",{staticClass:"col-xs-11 text-weight-bold"},[e._v(e._s(e.itemsInOrder)+" Items")])]),r("q-card-section",{staticClass:"text-color row items-center q-pa-sm"},[e.hasItemsInOrder?r("div",{staticClass:"col-xs-12"},[r("div",{staticClass:"row"},e._l(e.showItemsInOrder,(function(e,t){return r("div",{key:t,staticClass:"col-xs-12 q-px-xs q-py-sm"},[r("q-card",[r("order-item-display",{attrs:{menuItemDetails:e}})],1)],1)})),0),r("div",{staticClass:"row q-pt-md q-px-lg"},[r("div",{staticClass:"col-xs-12 text-right text-weight-bolder text-caption"},[e._v("\n          Items Total: R "+e._s(e.itemTotal)+"\n        ")])]),r("div",{staticClass:"row q-px-lg"},[e.basketExtrasCost?r("div",{staticClass:"col-xs-12 text-right text-weight-bolder text-caption"},[e._v("\n          Extra's Total: R "+e._s(e.basketExtrasCost)+"\n        ")]):e._e()]),r("div",{staticClass:"row q-px-lg"},[r("div",{staticClass:"col-xs-12 text-right text-weight-bolder text-caption"},[e._v("\n          VAT "+e._s((100*e.$store.getters.getVATRate).toFixed(2))+"% (Already\n          Included): R "+e._s(e.vatTotal)+"\n        ")])]),r("applied-promo-view",{attrs:{getSimplifiedDiscountPromo:e.getSimplifiedDiscountPromo}}),r("div",{staticClass:"row q-px-lg"},[r("div",{staticClass:"col-xs-12 text-right text-weight-bolder text-subtitle1"},[e._v("\n          Order Total: R "+e._s(e.basketTotal)+"\n        ")])])],1):r("div",[e._v("\n      please select an item to order\n    ")])])],1)},c=[],u=(r("4160"),r("13d5"),r("a9e3"),r("b680"),r("d3b7"),r("e6cf"),r("159b"),r("e260"),r("26e9"),r("fb6a"),r("4e82"),r("a434"),r("b0c0"),r("3ca3"),r("ddb0"),r("a8fc")),l=r.n(u),d={methods:{applyPromo:function(){var e=this;return a()(regeneratorRuntime.mark((function t(){var r,s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=[],t.next=3,e.showItemsInOrder.forEach(function(){var e=a()(regeneratorRuntime.mark((function e(t){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(s=0;s<t.quantity;s++)r.push({itemId:t.id,itemName:t.name,categoryId:t.categoryId,categoryName:t.categoryName,price:t.price});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:if(s=[],n=e.$store.getters.getCurrentCampaignSpecials,!(n&&n.length>0)){t.next=11;break}return t.next=8,n.forEach(function(){var e=a()(regeneratorRuntime.mark((function e(t){var n,i,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={type:"",promoName:"",items:[]},i=!0,e.next=4,JSON.parse(JSON.stringify(r));case 4:o=e.sent,o.sort((function(e,t){return e["categoryId"]-t["categoryId"]||e["price"]-t["price"]}));case 6:if(c=[],!(t.buyCategories.length>0)){e.next=11;break}return e.delegateYield(regeneratorRuntime.mark((function e(){var r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=[],s=l()(t.buyCategories,(function(e){return e._id})),e.next=4,s.forEach(function(){var e=a()(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o.forEach(function(){var e=a()(regeneratorRuntime.mark((function e(s,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t._id===s.categoryId&&r.push(n);case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:r.length>=t.buyCategories.length&&(c.push({index:0,value:!0}),r.sort().length=t.buyCategories.length),r.sort().reverse().forEach((function(e){o.splice(e,1)}));case 6:case"end":return e.stop()}}),e)}))(),"t0",9);case 9:e.next=12;break;case 11:0===t.buyCategories.length&&c.push({index:0,value:!0});case 12:if(!(t.buyItems.length>0)){e.next=16;break}return e.delegateYield(regeneratorRuntime.mark((function e(){var r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=[],e.next=3,l()(t.buyItems,(function(e){return e._id}));case 3:return s=e.sent,e.next=6,s.forEach(function(){var e=a()(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o.forEach(function(){var e=a()(regeneratorRuntime.mark((function e(s,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t._id===s.itemId&&r.push(n);case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 6:r.length>=t.buyItems.length&&(c.push({index:1,value:!0}),r=r.sort().slice(t.buyItems.length)),r.sort().reverse().forEach((function(e){o.splice(e,1)}));case 8:case"end":return e.stop()}}),e)}))(),"t1",14);case 14:e.next=17;break;case 16:0===t.buyItems.length&&c.push({index:1,value:!0});case 17:if(!(t.getCategories.length>0&&2===c.length)){e.next=21;break}return e.delegateYield(regeneratorRuntime.mark((function e(){var r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=[],s=l()(t.getCategories,(function(e){return e._id})),e.next=4,s.forEach(function(){var e=a()(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o.forEach(function(){var e=a()(regeneratorRuntime.mark((function e(s,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t._id===s.categoryId&&r.push(n);case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:r.length>=t.getCategories.length&&(c.push({index:2,value:!0}),r.sort().length=t.getCategories.length),r.sort().forEach((function(e){n.items.push(o[e])})),r.sort().forEach((function(e){o.splice(e,1)}));case 7:case"end":return e.stop()}}),e)}))(),"t2",19);case 19:e.next=22;break;case 21:0===t.getCategories.length&&c.push({index:2,value:!0});case 22:if(!(t.getItems.length>0&&3===c.length)){e.next=26;break}return e.delegateYield(regeneratorRuntime.mark((function e(){var r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=[],s=l()(t.getItems,(function(e){return e._id})),e.next=4,s.forEach(function(){var e=a()(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o.forEach(function(){var e=a()(regeneratorRuntime.mark((function e(s,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t._id===s.itemId&&r.push(n);case 1:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 4:r.length>=t.getItems.length&&(c.push({index:3,value:!0}),r=r.sort().slice(t.getItems.length)),r.sort().forEach((function(e){n.items.push(o[e])})),r.sort().forEach((function(e){o.splice(e,1)}));case 7:case"end":return e.stop()}}),e)}))(),"t3",24);case 24:e.next=27;break;case 26:0===t.getItems.length&&c.push({index:3,value:!0});case 27:i=4===c.length,c=null;case 29:if(i){e.next=6;break}case 30:n.items&&n.items.length>0&&(n.promoName=t.name,n.type=t.type,s.push(n));case 31:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 8:return t.abrupt("return",s);case 11:return t.abrupt("return",s);case 12:case"end":return t.stop()}}),t)})))()},applyApplicablePromos:function(){if(this.totalPromoDiscounts=[],this.simplifiedDiscountPromo=[],this.totalPromoDiscounts=0,this.getDiscountedPromoItems&&this.getDiscountedPromoItems.length>0)for(var e=0;e<this.getDiscountedPromoItems.length;e++){for(var t=0,r=0;r<this.getDiscountedPromoItems[e].items.length;r++)t+=this.getDiscountedPromoItems[e].items[r].price,"HP01"===this.getDiscountedPromoItems[e].type&&(t/=2);this.simplifiedDiscountPromo.push({name:this.getDiscountedPromoItems[e].promoName,discountPrice:t}),this.totalPromoDiscounts=this.totalPromoDiscounts+t}}}},p={components:{"order-item-display":function(){return r.e(4).then(r.bind(null,"cba2"))},"applied-promo-view":function(){return r.e(6).then(r.bind(null,"2540"))}},mixins:[d],props:{},data:function(){return{totalPromoDiscounts:0,discountedPromoItems:[],simplifiedDiscountPromo:[]}},computed:{hasItemsInOrder:function(){return this.$store.getters.getBasket.length>0},basketLength:function(){return this.$store.getters.getBasket.length},showItemsInOrder:function(){return this.$store.getters.getBasket},itemsInOrder:function(){return this.$store.getters.getBasket.reduce((function(e,t){return+e+ +t.quantity}),0)},vatTotal:function(){return(this.basketTotal*Number(this.$store.getters.getVATRate)).toFixed(2)},basketTotal:function(){return this.itemTotal+this.basketExtrasCost-this.getTotalPromoDiscounts},totalItemsCost:function(){return this.itemTotal+this.basketExtrasCost},itemTotal:function(){return this.$store.getters.getBasket.reduce((function(e,t){return+e+ +t.price*t.quantity}),0)},basketExtrasCost:function(){var e=0;return this.showItemsInOrder.forEach((function(t){t.makeCalzone&&(e+=t.calzonePrice),t.extraBurgerToppings.length>0&&(e+=t.extraBurgerToppings.reduce((function(e,t){return+e+ +t.price}),0)),t.extraDessertToppings.length>0&&(e+=t.extraDessertToppings.reduce((function(e,t){return+e+ +t.price}),0)),t.extraMainOptions.length>0&&(e+=t.extraMainOptions.reduce((function(e,t){return+e+ +t.price}),0)),t.extraPastaToppings.length>0&&(e+=t.extraPastaToppings.reduce((function(e,t){return+e+ +t.price}),0)),t.extraPizzaToppings.length>0&&(e+=t.extraPizzaToppings.reduce((function(e,t){return+e+ +t.price}),0)),t.extraSaladToppings.length>0&&(e+=t.extraSaladToppings.reduce((function(e,t){return+e+ +t.price}),0)),t.extraSuaces.length>0&&(e+=t.extraSuaces.reduce((function(e,t){return+e+ +t.price}),0))})),e},getTotalPromoDiscounts:function(){return this.totalPromoDiscounts},getSimplifiedDiscountPromo:function(){return this.simplifiedDiscountPromo},getDiscountedPromoItems:function(){return this.discountedPromoItems}},watch:{itemsInOrder:function(){var e=this;return a()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.applyPromo();case 2:e.discountedPromoItems=t.sent;case 3:case"end":return t.stop()}}),t)})))()},discountedPromoItems:function(){this.applyApplicablePromos()},hasItemsInOrder:function(){this.hasItemsInOrder||this.$emit("closeViewPurchaseProcess")}},beforeCreate:function(){},created:function(){},beforeMount:function(){},mounted:function(){var e=this;return a()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.applyPromo();case 2:e.discountedPromoItems=t.sent;case 3:case"end":return t.stop()}}),t)})))()},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},methods:{}},m=p,f=r("2877"),h=r("a370"),v=r("f09f"),g=r("eebe"),x=r.n(g),b=Object(f["a"])(m,o,c,!1,null,null,null),y=b.exports;x()(b,"components",{QCardSection:h["a"],QCard:v["a"]});var C=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"row justify-center"},[e.dataPopulated?r("div",{staticClass:"col-xs-12 col-sm-12"},[r("q-card",{staticClass:"q-pa-md"},[r("q-form",{ref:"myForm",on:{submit:e.onSubmit}},[r("div",{staticClass:"row justify-center"},[r("div",{staticClass:"col-xs-12"},[e.hasExistingContactNumber?r("div",{staticClass:"col-xs-6 text-center q-pa-md text-color text-weight-bold"},[r("q-checkbox",{attrs:{"left-label":"",label:"Use existing contact number ("+e.updateOrderDetailsObj.contactNumber+")",color:"positive"},model:{value:e.useExistingContactNumber,callback:function(t){e.useExistingContactNumber=t},expression:"useExistingContactNumber"}})],1):e._e(),e.useExistingContactNumber?e._e():r("div",{staticClass:"col-xs-11 q-pa-md"},[r("q-input",{attrs:{outlined:"",label:"Contact number","lazy-rules":"",mask:"(###) ### - ####",color:"positive",rules:[function(e){return e&&/\S/.test(e)||"Contact number is required!"},function(e){return 16===e.length||"Valid contact number is required"}]},model:{value:e.updateOrderDetailsObj.contactNumber,callback:function(t){e.$set(e.updateOrderDetailsObj,"contactNumber",t)},expression:"updateOrderDetailsObj.contactNumber"}})],1),r("div",{staticClass:"col-xs-11 items-center "},[r("div",{staticClass:"row justify-center text-center"},[r("div",[r("q-field",{staticClass:"delivery-fit-content",attrs:{dense:"",borderless:"",value:e.deliveryType,rules:[function(e){return null!=e||"Please select delivery type!"}]},scopedSlots:e._u([{key:"control",fn:function(){return[r("div",{staticClass:"col-xs-12 justify-around text-center text-color text-weight-bold"},[r("q-option-group",{attrs:{inline:"",options:e.getOptions,color:"positive"},model:{value:e.deliveryType,callback:function(t){e.deliveryType=t},expression:"deliveryType"}})],1)]},proxy:!0}],null,!1,3154995262)})],1)])])])]),"Delivery"===e.deliveryType?r("div",{staticClass:"row justify-center"},[r("div",{staticClass:"col-xs-12 items-center"},[e.hasExistingAddresss?r("div",{staticClass:"col-xs-6 text-center text-color text-weight-bold"},[r("q-checkbox",{attrs:{"left-label":"",label:"Use existing delivery address",color:"positive"},model:{value:e.useExistingAddress,callback:function(t){e.useExistingAddress=t},expression:"useExistingAddress"}})],1):e._e(),e.useExistingAddress?e._e():r("div",{staticClass:"col-xs-11 q-pa-md"},[r("q-input",{attrs:{outlined:"",label:"Delievery Address",autogrow:"","lazy-rules":"",color:"positive",rules:[function(e){return e&&e.length>0&&/\S/.test(e)||"Address is required!"}]},model:{value:e.updateOrderDetailsObj.address,callback:function(t){e.$set(e.updateOrderDetailsObj,"address",t)},expression:"updateOrderDetailsObj.address"}})],1),e.useExistingAddress?e._e():r("div",{staticClass:"col-xs-11 q-pa-md"},[r("q-input",{attrs:{outlined:"",label:"Delievery Address Line 2",autogrow:"",color:"positive"},model:{value:e.updateOrderDetailsObj.addressLine2,callback:function(t){e.$set(e.updateOrderDetailsObj,"addressLine2",t)},expression:"updateOrderDetailsObj.addressLine2"}})],1),e.useExistingAddress?e._e():r("div",{staticClass:"col-xs-11 q-pt-md q-px-md"},[r("q-select",{attrs:{outlined:"",options:e.deliveryAreas,label:"Select Delivery Area",color:"positive",dense:"","use-input":"","input-debounce":"0","option-value":"_id","option-label":"area","lazy-rules":"",rules:[function(e){return null!=e||"Please select a delivery area!"}]},on:{filter:e.filterFn},scopedSlots:e._u([{key:"no-option",fn:function(){return[r("q-item",[r("q-item-section",{staticClass:"text-italic text-grey"},[e._v("\n                      No options available\n                    ")])],1)]},proxy:!0}],null,!1,3809330998),model:{value:e.updateOrderDetailsObj.deliveryArea,callback:function(t){e.$set(e.updateOrderDetailsObj,"deliveryArea",t)},expression:"updateOrderDetailsObj.deliveryArea"}})],1),"Delivery"===e.deliveryType?r("div",{staticClass:"col-xs-11 q-px-md text-color text-center text-weight-bold"},[e._v("\n              Delivery cost R "+e._s(e.getDeliveryCost)+"\n            ")]):e._e()])]):e._e(),r("div",{staticClass:"col-xs-12 text-center q-px-md q-pt-md text-color text-weight-bold"},[e._v("\n          Notify me when the status of my order changes using:\n        ")]),r("div",{staticClass:"row justify-center q-py-md"},[r("div",{staticClass:"col-xs-6 text-center q-px-md text-color text-weight-bold"},[e.$q.platform.is.ios?e._e():r("q-checkbox",{attrs:{"left-label":"",label:"Phone notifications",color:"positive"},model:{value:e.subscribe,callback:function(t){e.subscribe=t},expression:"subscribe"}})],1),r("div",{staticClass:"col-xs-6 text-center q-px-md text-color text-weight-bold"},[r("q-checkbox",{attrs:{"left-label":"",label:"Emails",color:"positive"},model:{value:e.subscribeEmail,callback:function(t){e.subscribeEmail=t},expression:"subscribeEmail"}})],1)]),r("div",{staticClass:"col-xs-6 text-center text-caption text-color text-weight-bold q-pt-sm"},[r("span",{staticClass:"text-weight-bolder"},[e._v("\n            Notifications will be sent to you when -\n          ")]),r("br"),e._v("\n          Your order has been processed. "),r("br"),e._v("Your order is being prepared.\n          "),r("br"),e._v("Your order is ready.\n          "),"Delivery"===e.deliveryType?r("span",[r("br"),e._v("Your order is out for Delivery")]):e._e(),"Delivery"!==e.deliveryType?r("span",[r("br"),e._v("Your order is ready for Collection")]):e._e()])])],1)],1):e._e()])},w=[],D=(r("4de4"),r("c975"),r("cca6"),r("3524")),O=r("13ea"),q=r.n(O),k={components:{},mixins:[],props:{},data:function(){return{updateOrderDetailsObj:null,useExistingAddress:!1,useExistingContactNumber:!1,hasExistingAddresss:!1,hasExistingContactNumber:!1,deliveryType:null,deliveryAreas:[],subscribe:!1,subscribeEmail:!1,assignedDataLoaded:!1}},computed:{dataPopulated:function(){return!q()(this.updateOrderDetailsObj)},getOptions:function(){var e=[];return this.$store.getters.getDeliveryServiceAvailable?(e.push({label:"Collection",value:"Collection"}),e.push({label:"Delivery",value:"Delivery"}),e):(e.push({label:"Collection",value:"Collection"}),e)},getCurrentProfile:function(){return this.$store.getters.getMyProfile},getDeliveryCost:function(){return"Delivery"===this.deliveryType&&this.updateOrderDetailsObj.deliveryArea?this.updateOrderDetailsObj.deliveryArea.price:0}},watch:{getCurrentProfile:function(e,t){!q()(e)&&q()(t)&&this.assignedDataLoaded&&q()(this.updateOrderDetailsObj)&&this.assignData()},useExistingAddress:function(){this.useExistingAddress&&(this.updateOrderDetailsObj.address=this.getCurrentProfile.address,this.updateOrderDetailsObj.addressLine2=this.getCurrentProfile.addressLine2,this.updateOrderDetailsObj.deliveryArea=this.getCurrentProfile.deliveryArea)},useExistingContactNumber:function(){this.useExistingAddress&&(this.updateOrderDetailsObj.contactNumber=this.getCurrentProfile.contactNumber)}},beforeCreate:function(){},created:function(){},beforeMount:function(){},mounted:function(){var e=this;return a()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.assignData();case 2:case"end":return t.stop()}}),t)})))()},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},methods:{filterFn:function(e,t,r){var s=this;t((function(){var t=e.toLocaleLowerCase();s.deliveryAreas=s.$store.getters.getDeliveryCharges.filter((function(e){return e.area.toLocaleLowerCase().indexOf(t)>-1}))}))},setModel:function(e){this.deliveryAreas=e},assignData:function(){var e=this;return a()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.updateOrderDetailsObj=JSON.parse(JSON.stringify(e.getCurrentProfile)),e.updateOrderDetailsObj&&e.updateOrderDetailsObj.address?(e.hasExistingAddresss=!0,e.useExistingAddress=!0):e.useExistingAddress=!1,e.updateOrderDetailsObj&&e.updateOrderDetailsObj.contactNumber?(e.hasExistingContactNumber=!0,e.useExistingContactNumber=!0):e.useExistingContactNumber=!1,e.assignedDataLoaded=!0;case 4:case"end":return t.stop()}}),t)})))()},onSubmit:function(){var e=this;return a()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.myForm.validate().then(function(){var t=a()(regeneratorRuntime.mark((function t(r){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=5;break}return t.next=3,e.createDTO();case 3:s=t.sent,e.$emit("proceedPaymentMethod",{dto:s,deliveryCost:e.getDeliveryCost});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t)})))()},createDTO:function(){var e=this;return a()(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.updateOrderDetailsObj.subscribeNotifications=e.subscribe,e.updateOrderDetailsObj.subscribeEmailNotifications=e.subscribeEmail,!e.updateOrderDetailsObj.subscribeNotifications){t.next=6;break}return t.next=5,Object(D["webPushCreateSub"])();case 5:e.updateOrderDetailsObj.subscriptionObject=t.sent;case 6:return r=Object.assign({},e.updateOrderDetailsObj),r.orderType=e.deliveryType,"Delivery"!==e.deliveryType&&(delete r.deliveryArea,delete r.address,delete r.addressLine2),t.abrupt("return",r);case 10:case"end":return t.stop()}}),t)})))()}}},_=k,P=(r("e0b5"),r("0378")),I=r("8f8e"),R=r("27f9"),T=r("8572"),E=r("9f0a"),j=r("ddd8"),$=r("66e5"),N=r("4074"),A=Object(f["a"])(_,C,w,!1,null,null,null),S=A.exports;x()(A,"components",{QCard:v["a"],QForm:P["a"],QCheckbox:I["a"],QInput:R["a"],QField:T["a"],QOptionGroup:E["a"],QSelect:j["a"],QItem:$["a"],QItemSection:N["a"]});var Q=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"text-color"},[r("q-card-section",{staticClass:"text-color row items-center q-pb-none"},[r("div",{staticClass:"col-xs-12"},[r("div",{staticClass:"text-weight-bolder q-pb-xs text-center text-subtitle1"},[e._v("\n        Order Summary\n      ")])])]),r("div",{staticClass:"row justify-center text-color"},[r("div",{staticClass:"col-xs-10 q-pa-sm"},[r("q-card",[r("div",{staticClass:"row q-pa-sm"},[e._l(e.showItemsInOrder,(function(t,s){return r("div",{key:s,staticClass:"col-xs-12 q-px-md q-py-xs"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-xs-6"},[e._v("\n                "+e._s(t.quantity)+" x "+e._s(t.name)+"\n              ")]),r("div",{staticClass:"col-xs-6 text-right"},[e._v("\n                R "+e._s(t.price*t.quantity)+"\n              ")])])])})),r("div",{staticClass:"row q-px-md q-pt-md"},[r("div",{staticClass:"col-xs-12 text-weight-bold"},[e._v("\n              Total items in Basket: "+e._s(e.itemsInOrder)+"\n            ")])])],2),r("div",{staticClass:"row q-pb-sm q-pa-sm"},[r("div",{staticClass:"col-xs-12 q-px-md q-py-xs q-pb-md"},[r("div",{staticClass:"col-xs-12 text-weight-bolder text-right text-caption"},[e._v("\n              SubTotal (Items + Extras): R "+e._s(e.orderTotal)+"\n            ")]),r("div",{staticClass:"col-xs-12 text-weight-bolder text-right text-caption"},[e._v("\n              VAT (Already Included): R "+e._s(e.vatTotal)+"\n            ")]),e.orderDeliveryCharge>0?r("div",{staticClass:"col-xs-12 text-weight-bold text-right"},[e._v("\n              Delivery fee: R "+e._s(e.orderDeliveryCharge)+"\n            ")]):e._e(),e.promoDiscounts&&e.promoDiscounts.length>0?r("div",{staticClass:"row q-px-lg q-pt-sm"},[r("div",{staticClass:"col-xs-12 text-center text-weight-bolder text-body2"},[e._v("\n                Current Promos Applied:\n              ")])]):e._e(),e.promoDiscounts&&e.promoDiscounts.length>0?r("div",{staticClass:"row q-px-lg"},e._l(e.promoDiscounts,(function(t,s){return r("div",{key:s,staticClass:"col-xs-12 text-center text-weight-bolder text-caption"},[e._v("\n                "+e._s(t.name)+": R - "+e._s(t.discountPrice)+"\n              ")])})),0):e._e(),e.promoDiscounts&&e.promoDiscounts.length>0?r("div",{staticClass:"q-py-xs"}):e._e(),r("div",{staticClass:"col-xs-12 text-weight-bolder text-right"},[e._v("\n              Total Due: R\n              "+e._s(e.orderTotal+e.orderDeliveryCharge-e.totalPromoDiscounts)+"\n            ")])])])])],1)]),r("div",{staticClass:"col-xs-11 items-center "},[r("div",{staticClass:"row justify-center text-center"},[r("q-form",{ref:"myForm",on:{submit:e.onSubmit}},[r("q-field",{staticClass:"delivery-fit-content",attrs:{dense:"",borderless:"",value:e.paymentType,rules:[function(e){return null!=e||"Please select an option!"}]},scopedSlots:e._u([{key:"control",fn:function(){return[r("div",{staticClass:"col-xs-12 justify-around text-center text-color text-weight-bold"},[r("q-option-group",{attrs:{inline:"",options:e.getOptions,color:"positive"},model:{value:e.paymentType,callback:function(t){e.paymentType=t},expression:"paymentType"}})],1)]},proxy:!0}])})],1)],1)])],1)},M=[],B={components:{},mixins:[d],props:{deliveryOrCollection:{type:String,default:"",required:!0},orderTotal:{type:Number,default:0,required:!0},orderDeliveryCharge:{type:Number,default:0,required:!0},promoDiscounts:{type:Array,default:function(){return[]},required:!1},totalPromoDiscounts:{type:Number,default:0,required:!1}},data:function(){return{paymentType:null}},computed:{getOptions:function(){var e=[];return this.$store.getters.getPayNowStatus&&e.push({label:"Pay now",value:"Pay now"}),e.push({label:"Pay on ".concat(this.deliveryOrCollection),value:"Pay on ".concat(this.deliveryOrCollection)}),e},showItemsInOrder:function(){return this.$store.getters.getBasket},itemsInOrder:function(){return this.$store.getters.getBasket.reduce((function(e,t){return+e+ +t.quantity}),0)},vatTotal:function(){return(this.orderTotal*Number(this.$store.getters.getVATRate)).toFixed(2)}},watch:{},beforeCreate:function(){},created:function(){},beforeMount:function(){},mounted:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},methods:{onSubmit:function(){var e=this;return a()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$refs.myForm.validate().then(function(){var t=a()(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r&&e.$emit("placeOrder",e.paymentType);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t)})))()}}},L=B,z=Object(f["a"])(L,Q,M,!1,null,null,null),F=z.exports;x()(z,"components",{QCardSection:h["a"],QCard:v["a"],QForm:P["a"],QField:T["a"],QOptionGroup:E["a"]});var U=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"text-color"},[r("q-card-section",{staticClass:"text-color row items-center q-pb-none"},[r("div",{staticClass:"col-xs-12"},[r("div",{staticClass:"text-weight-bolder q-pb-xs text-center text-subtitle1"},[e._v("\n        Whoops, somethings changed!\n      ")])])]),r("div",{staticClass:"row justify-center text-color"},[r("div",{staticClass:"col-xs-10 q-pa-sm"},[e.invalidNames.length>0?r("q-card",[r("div",{staticClass:"row q-pa-sm justify-center"},[r("div",{staticClass:"row q-pa-sm text-center"},[e._v("\n            Unfortunately the following item(s) are no longer available for\n            purchase at this time\n          ")]),e._l(e.invalidNames,(function(t,s){return r("div",{key:s,staticClass:"row justify-center"},[r("span",{staticClass:"text-weight-bold q-pa-xs"},[e._v(e._s(s+1)+") "+e._s(t)+"\n            ")]),r("br")])})),r("div",{staticClass:"row q-pa-sm text-center"},[e._v("\n            They have been automatically removed from your basket, we\n            apologies for any inconvinence caused.\n          ")])],2)]):e._e()],1)])],1)},Y=[],V={components:{},mixins:[],props:{invalidNames:{type:Array,default:function(){return[]},required:!0},invalidIds:{type:Array,default:function(){return[]},required:!0},invalidCategories:{type:Array,default:function(){return[]},required:!0}},data:function(){return{}},computed:{},watch:{},beforeCreate:function(){},created:function(){},beforeMount:function(){},mounted:function(){var e=this;return a()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.UpdateBasket();case 2:return t.next=4,e.UpdateMenuItems();case 4:case"end":return t.stop()}}),t)})))()},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},methods:{UpdateBasket:function(){var e=this;return a()(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=0;case 1:if(!(r<e.invalidIds.length)){t.next=7;break}return t.next=4,e.$store.dispatch("filteroutBasketItem",e.invalidIds[r]);case 4:r++,t.next=1;break;case 7:case"end":return t.stop()}}),t)})))()},UpdateMenuItems:function(){var e=this;return a()(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=0;case 1:if(!(r<e.invalidCategories.length)){t.next=7;break}return t.next=4,e.$store.dispatch("retrieveMenuItems",{forceRefresh:!0,value:e.invalidCategories[r]});case 4:r++,t.next=1;break;case 7:case"end":return t.stop()}}),t)})))()}}},J=V,G=Object(f["a"])(J,U,Y,!1,null,null,null),H=G.exports;x()(G,"components",{QCardSection:h["a"],QCard:v["a"]});var W=r("9149"),K={components:{basket:y,orderDetails:S,purchaseSummary:F,purchaseProcessError:H},mixins:[],props:{viewPurchaseProcess:{type:Boolean,default:!1,required:!0}},data:function(){return{step:1,orderDetails:{},orderTotal:0,orderDeliveryCharge:0,invalidNames:[],invalidIds:[],invalidCategories:[]}},computed:{hasItemsInOrder:function(){return this.$store.getters.getBasket.length>0},getLabel:function(){return this.$store.getters.getAuth?1===this.step?"Order Details":2===this.step?"Payment Methods":"Confirm":"Login Required"}},watch:{},beforeCreate:function(){},created:function(){},beforeMount:function(){this.$store.dispatch("retrieveMyProfile"),this.$store.dispatch("retrieveDefaultSettings",{forceRefresh:!0})},mounted:function(){},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},methods:{closeDialog:function(){this.$emit("update:viewPurchaseProcess",!1)},proceedPaymentMethod:function(e){this.orderDetails=e.dto,this.orderDeliveryCharge=e.deliveryCost,this.step++},placeOrder:function(e){var t=this;return a()(regeneratorRuntime.mark((function r(){var s,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.orderDetails.paymentType=e,s=t.orderDetails,s.orderDetails=t.$store.getters.getBasket,t.$q.loading.show({spinner:W["a"],spinnerColor:"positive",backgroundColor:"darkgrey",message:"Processing Order...."}),r.next=6,t.$store.dispatch("placeOrder",s);case 6:n=r.sent,t.$q.loading.hide(),n&&null!=n.success&&n.success?("Delivery"!==s.orderDetails.orderType&&t.$q.notify({type:"positive",message:"Order has been placed.",color:"positive"}),t.closeDialog()):n&&null==n.success&&(t.invalidNames=n.invalidNames,t.invalidIds=n.invalidIds,t.invalidCategories=n.invalidCategories,t.step++);case 9:case"end":return r.stop()}}),r)})))()},proceed:function(){var e=this;return a()(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:1===e.step?(e.orderTotal=e.$refs.basket.totalItemsCost,e.step++):2===e.step?e.$refs.orderDetail.onSubmit():3===e.step?e.$refs.purchaseSummary.onSubmit():4===e.step&&e.closeDialog();case 1:case"end":return t.stop()}}),t)})))()}}},X=K,Z=(r("27ae"),r("f531")),ee=r("87fe"),te=r("b19c"),re=r("9c40"),se=Object(f["a"])(X,s,n,!1,null,null,null);t["default"]=se.exports;x()(se,"components",{QCard:v["a"],QStepper:Z["a"],QStep:ee["a"],QStepperNavigation:te["a"],QBtn:re["a"]})},fd95:function(e,t,r){}}]);